#set($hits = $publishingentityassethits)
#set($imagesize = "image3000x3000.jpg")


#if($hits)
	<div id="__carousel" class="splide" role="group">
		<div class="splide__arrows">
			<button class="splide__arrow splide__arrow--prev">
				<div class="__arrow-btn">
					<svg xmlns="http://www.w3.org/2000/svg" width="80" height="80" fill="currentColor" viewBox="0 0 16 16">
						<path fill-rule="evenodd" d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708" />
					</svg>
				</div>
			</button>
			<button class="splide__arrow splide__arrow--next">
				<div class="__arrow-btn">
					<svg xmlns="http://www.w3.org/2000/svg" width="80" height="80" fill="currentColor" viewBox="0 0 16 16">
						<path fill-rule="evenodd" d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708"/>
					</svg>
				</div>
			</button>
		</div>
		<div class="splide__track">
			<ul class="splide__list">
				#set( $preset = $mediaarchive.getCachedData("convertpreset","largeimage"))
				#foreach($hit in $hits)
					#set ($sourcepath = $hit.sourcepath)    		
					#set( $type = $mediaarchive.getMediaRenderType($hit.fileformat))
					$context.putPageValue("type", $type)

					#if ($type=="audio")
						#set( $alwaysmime = true)
						$context.putPageValue("alwaysmime", $alwaysmime)
					#end
								
					
					#set($imagelink = $mediaarchive.asLinkToPreview($hit, null, $imagesize, true))
											
					#set($hittitle = "")
					#if ($hit.name)
							#set($hittitle = $context.getText($hit.name))
					#elseif($hit.assettitle)
							#set($hittitle = $context.getText($hit.assettitle))
					#end
					
					#set($hitcaption = "")
					#if( $publishing.image_caption_enabled  == true)
					#if ($hit.headline)
							#set($hitcaption = $hit.headline)
					#elseif($hit.longcaption)
							#set($hitcaption = $hit.longcaption)
					#end
					#end

					#set($downloadimagelink = $mediaarchive.asLinkToDownload($hit, null, $preset))

					<li class="splide__slide" title="$!{hittitle}">
						<a class="__download-img" title="[[Download]]" href="$downloadimagelink" >
							<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
								<path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5"/>
								<path d="M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708z"/>
							</svg>
						</a>
						<div style="position: relative;height: 100%;width: 100%;" class="__image">
							<img src="$imagelink" alt="$!{hittitle}">
							#if($hitcaption != "")
								<span class="__img_caption">$!{hitcaption}</span>
							#end
						</div>
					</li>
				#end
			</ul>
		</div> 
	</div>
	<div id="__carousel-thumbnails" class="splide" role="group">
		<div class="splide__track">
			<ul class="splide__list">
				#foreach($hit in $hits.getPageOfHits())
					#set ($sourcepath = $hit.sourcepath)    		
					#set( $type = $mediaarchive.getMediaRenderType($hit.fileformat))
					$context.putPageValue("type", $type)

					#if ($type=="audio")
						#set( $alwaysmime = true)
						$context.putPageValue("alwaysmime", $alwaysmime)
					#end
											
					#set($hittitle = "")
					#if ($hit.name)
							#set($hittitle = $context.getText($hit.name))
					#elseif($hit.assettitle)
							#set($hittitle = $context.getText($hit.assettitle))
					#end

					#set($imagelink = $mediaarchive.asLinkToPreview($hit, "", $imagesize, true))
					<li class="splide__slide" title="$!{hittitle}">
						<img src="$imagelink" alt="$!{hittitle}">
					</li>
				#end
			</ul>
		</div> 
	</div>
#end