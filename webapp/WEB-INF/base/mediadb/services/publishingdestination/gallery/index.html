#if($publishing.externalcss_enabled == "true" && $publishing.externalcss)
<link type="text/css" rel="stylesheet" href="$publishing.externalcss">
#end

<style type="text/css">
	:root {
		--bg-color: #if($publishing.publishingfeedlayout=="dark") #000 #else #FFFFFF #end;
		--text-color: #if($publishing.publishingfeedlayout=="dark") #fff #else #000 #end;
		--highlight-color: #if($publishing.publishingfeedlayout=="dark") #666 #else #444 #end;
		--filler-color: #ddd;
		#if($publishing.containerdimension_enabled=="true")
		--container-width: #if($publishing.containerwidth > 0) ${publishing.containerwidth}px #else 1000px #end;
		--container-height: #if($publishing.containerheight > 0) ${publishing.containerheight}px #else 824px #end;
		#else
		--container-width: 100%;
		--container-height: 100%;
		#end
	}
	html,
	body { overflow-y: auto; }
	body {
		width: 100vw;
		height: 100vh;
		margin: 0;
		padding: 0;
	}
	
	.__main-container {
		position: relative;
		display: flex;
		flex-direction: column;
		background-color: var(--bg-color);
		width: var(--container-width);
		height: var(--container-height);
		overflow: hidden;
	}
	
	._gridgallery-container {
		flex: 1;
		height: 100%;
	}
	
	
.masonry-grid2 {
  display: flex;
  flex-flow: row wrap;
  justify-content: center;
  position: relative;
}
.scrollview {
	height: 100%;
	padding: 0 8px 8px;
}
.scroll-resultsdiv {
    display: flex;
    flex-direction: column;
    height: 100%;
    width: 100%;
    overflow: hidden;
}	
.masonry-grid2 .masonry-grid-cell {
  position: absolute;
}

.masonry-grid-cell .grid-thumbimage {
  padding: 0;
  margin: 0;
  height: 100%;
  text-align: center;
  color: #111;
}

div.masonry-grid-cell .grid-thumbimage img.imagethumb {
  padding: 0;
  display: none;
  margin: 0 auto;
  vertical-align: middle;
  width: 100%;
  height: 100%;
  object-position: center;
  object-fit: cover;
  transition: all 0.1s ease;
}
div.masonry-grid-cell:hover .grid-cell-footer  {
	display: block;
	}
div.masonry-grid-cell .grid-cell-footer  {
	position: absolute;
	display: none;
	bottom: 2px;
	right: 2px;
}
.downloadicon {
	background-image: url('data:image/svg+xml,<svg viewBox="0 0 24 24" fill="%233884fd" xmlns="http://www.w3.org/2000/svg"><path d="M12.5535 16.5061C12.4114 16.6615 12.2106 16.75 12 16.75C11.7894 16.75 11.5886 16.6615 11.4465 16.5061L7.44648 12.1311C7.16698 11.8254 7.18822 11.351 7.49392 11.0715C7.79963 10.792 8.27402 10.8132 8.55352 11.1189L11.25 14.0682V3C11.25 2.58579 11.5858 2.25 12 2.25C12.4142 2.25 12.75 2.58579 12.75 3V14.0682L15.4465 11.1189C15.726 10.8132 16.2004 10.792 16.5061 11.0715C16.8118 11.351 16.833 11.8254 16.5535 12.1311L12.5535 16.5061Z" style="fill: rgb(255, 255, 255);" transform="matrix(1, 0, 0, 1, -2.220446049250313e-16, 0)"></path><path d="M3.75 15C3.75 14.5858 3.41422 14.25 3 14.25C2.58579 14.25 2.25 14.5858 2.25 15V15.0549C2.24998 16.4225 2.24996 17.5248 2.36652 18.3918C2.48754 19.2919 2.74643 20.0497 3.34835 20.6516C3.95027 21.2536 4.70814 21.5125 5.60825 21.6335C6.47522 21.75 7.57754 21.75 8.94513 21.75H15.0549C16.4225 21.75 17.5248 21.75 18.3918 21.6335C19.2919 21.5125 20.0497 21.2536 20.6517 20.6516C21.2536 20.0497 21.5125 19.2919 21.6335 18.3918C21.75 17.5248 21.75 16.4225 21.75 15.0549V15C21.75 14.5858 21.4142 14.25 21 14.25C20.5858 14.25 20.25 14.5858 20.25 15C20.25 16.4354 20.2484 17.4365 20.1469 18.1919C20.0482 18.9257 19.8678 19.3142 19.591 19.591C19.3142 19.8678 18.9257 20.0482 18.1919 20.1469C17.4365 20.2484 16.4354 20.25 15 20.25H9C7.56459 20.25 6.56347 20.2484 5.80812 20.1469C5.07435 20.0482 4.68577 19.8678 4.40901 19.591C4.13225 19.3142 3.9518 18.9257 3.85315 18.1919C3.75159 17.4365 3.75 16.4354 3.75 15Z" style="fill: rgb(242, 242, 242);" transform="matrix(1, 0, 0, 1, -2.220446049250313e-16, 0)"></path><path d="M 12.457 16.27 C 12.315 16.426 12.114 16.514 11.903 16.514 C 11.693 16.514 11.492 16.426 11.35 16.27 L 7.35 11.895 C 7.07 11.59 7.092 11.115 7.397 10.836 C 7.703 10.556 8.177 10.577 8.457 10.883 L 11.153 13.832 L 11.153 2.764 C 11.153 2.35 11.489 2.014 11.903 2.014 C 12.318 2.014 12.653 2.35 12.653 2.764 L 12.653 13.832 L 15.35 10.883 C 15.629 10.577 16.104 10.556 16.409 10.836 C 16.715 11.115 16.736 11.59 16.457 11.895 L 12.457 16.27 Z" transform="matrix(1, 0, 0, 1, -2.220446049250313e-16, 0)"></path><path d="M 3.626 14.842 C 3.626 14.428 3.291 14.092 2.876 14.092 C 2.462 14.092 2.126 14.428 2.126 14.842 L 2.126 14.897 C 2.126 16.264 2.126 17.367 2.243 18.234 C 2.364 19.134 2.623 19.892 3.225 20.493 C 3.827 21.095 4.585 21.354 5.485 21.475 C 6.352 21.592 7.454 21.592 8.822 21.592 L 14.931 21.592 C 16.299 21.592 17.401 21.592 18.268 21.475 C 19.168 21.354 19.926 21.095 20.528 20.493 C 21.13 19.892 21.389 19.134 21.51 18.234 C 21.626 17.367 21.626 16.264 21.626 14.897 L 21.626 14.842 C 21.626 14.428 21.291 14.092 20.876 14.092 C 20.462 14.092 20.126 14.428 20.126 14.842 C 20.126 16.277 20.125 17.278 20.023 18.034 C 19.925 18.768 19.744 19.156 19.467 19.433 C 19.191 19.71 18.802 19.89 18.068 19.989 C 17.313 20.09 16.312 20.092 14.876 20.092 L 8.876 20.092 C 7.441 20.092 6.44 20.09 5.685 19.989 C 4.951 19.89 4.562 19.71 4.285 19.433 C 4.009 19.156 3.828 18.768 3.73 18.034 C 3.628 17.278 3.626 16.277 3.626 14.842 Z" transform="matrix(1, 0, 0, 1, -2.220446049250313e-16, 0)"></path></svg>');
	width: 20px;
	height: 20px;
	display: inline-block;
}
.downloadicon span {
	display: none;
}
.grid-filler {
	background-color: var(--filler-color);
}
.videoplay-button {
    position: absolute;
    top: 50%;
    left: 50%;
    background-color: transparent;
    height: 0.5em !important;
    font-size: 4em;
    line-height: 1em !important;
    margin-top: -0.5em !important;
    margin-left: -0.5em;
    background-color: rgba(0, 0, 0, 0);
    width: 0.5em;
    border: none;
    cursor: pointer;
    display: block;
    padding: 0;
    outline: none;
    opacity: 0.7;
}
.videoplay-icon {
    font-family: VideoJS;
    font-weight: 400;
    font-style: normal;
    color: #fff;
    text-shadow:0 0 black;
}
.videoplay-icon::before {
    content: "â–º";
}
.audio-thumb-container {
	padding-top: 2.5rem;
}


.slbOverlay, .slbWrapOuter, .slbWrap {
  position: fixed;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
}

.slbOverlay {
  overflow: hidden;
  z-index: 2000;
  background-color: #000;
  opacity: 0.7;
  -webkit-animation: slbOverlay 0.5s;
  -moz-animation: slbOverlay 0.5s;
  animation: slbOverlay 0.5s;
}

.slbWrapOuter {
  overflow-x: hidden;
  overflow-y: auto;
  z-index: 2010;
}

.slbWrap {
  position: absolute;
  text-align: center;
}

.slbWrap:before {
  content: "";
  display: inline-block;
  height: 100%;
  vertical-align: middle;
}

.slbContentOuter {
  position: relative;
  display: inline-block;
  vertical-align: middle;
  margin: 0px auto;
  padding: 0 1em;
  box-sizing: border-box;
  z-index: 2020;
  text-align: left;
  max-width: 100%;
}

.slbContentEl .slbContentOuter {
  padding: 5em 1em;
}

.slbContent {
  position: relative;
}

.slbContentEl .slbContent {
  -webkit-animation: slbEnter 0.3s;
  -moz-animation: slbEnter 0.3s;
  animation: slbEnter 0.3s;
  background-color: #fff;
  box-shadow: 0 0.2em 1em rgba(0, 0, 0, 0.4);
}

.slbImageWrap {
  -webkit-animation: slbEnter 0.3s;
  -moz-animation: slbEnter 0.3s;
  animation: slbEnter 0.3s;
  position: relative;
}

.slbImageWrap:after {
  content: "";
  position: absolute;
  left: 0;
  right: 0;
  top: 5em;
  bottom: 5em;
  display: block;
  z-index: -1;
  box-shadow: 0 0.2em 1em rgba(0, 0, 0, 0.6);
  background-color: #FFF;
}

.slbDirectionNext .slbImageWrap {
  -webkit-animation: slbEnterNext 0.4s;
  -moz-animation: slbEnterNext 0.4s;
  animation: slbEnterNext 0.4s;
}

.slbDirectionPrev .slbImageWrap {
  -webkit-animation: slbEnterPrev 0.4s;
  -moz-animation: slbEnterPrev 0.4s;
  animation: slbEnterPrev 0.4s;
}

.slbImage {
  width: auto;
  max-width: 100%;
  height: auto;
  display: block;
  line-height: 0;
  box-sizing: border-box;
  padding: 5em 0;
  margin: 0 auto;
}

.slbCaption {
  display: inline-block;
  max-width: 100%;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  word-wrap: normal;
  font-size: 1.4em;
  position: absolute;
  left: 0;
  right: 0;
  bottom: 0;
  padding: 0.71429em 0;
  color: #fff;
  color: rgba(255, 255, 255, 0.7);
  text-align: center;
}

.slbCloseBtn, .slbArrow {
  margin: 0;
  padding: 0;
  border: 0;
  cursor: pointer;
  background: none;
}

.slbCloseBtn::-moz-focus-inner, .slbArrow::-moz-focus-inner {
  padding: 0;
  border: 0;
}

.slbCloseBtn:hover, .slbArrow:hover {
  opacity: 0.5;
}

.slbCloseBtn:active, .slbArrow:active {
  opacity: 0.8;
}

.slbCloseBtn {
  -webkit-animation: slbEnter 0.3s;
  -moz-animation: slbEnter 0.3s;
  animation: slbEnter 0.3s;
  font-size: 3em;
  width: 1.66667em;
  height: 1.66667em;
  line-height: 1.66667em;
  position: absolute;
  right: -0.33333em;
  top: 0;
  color: #fff;
  color: rgba(255, 255, 255, 0.7);
  text-align: center;
}

.slbLoading .slbCloseBtn {
  display: none;
}

.slbLoadingText {
  font-size: 1.4em;
  color: #fff;
  color: rgba(255, 255, 255, 0.9);
}

.slbArrows {
  position: fixed;
  top: 50%;
  left: 0;
  right: 0;
}

.slbLoading .slbArrows {
  display: none;
}

.slbArrow {
  position: absolute;
  top: 50%;
  margin-top: -5em;
  width: 5em;
  height: 10em;
  opacity: 0.7;
  text-indent: -999em;
  overflow: hidden;
}

.slbArrow:before {
  content: "";
  position: absolute;
  top: 50%;
  left: 50%;
  margin: -0.8em 0 0 -0.8em;
  border: 0.8em solid transparent;
}

.slbArrow.next {
  right: 0;
}

.slbArrow.next:before {
  border-left-color: #fff;
}

.slbArrow.prev {
  left: 0;
}

.slbArrow.prev:before {
  border-right-color: #fff;
}

.slbIframeCont {
  width: 80em;
  height: 0;
  overflow: hidden;
  padding-top: 56.25%;
  margin: 5em 0;
}

.slbIframe {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  box-shadow: 0 0.2em 1em rgba(0, 0, 0, 0.6);
  background: #000;
}

@-webkit-keyframes slbOverlay {
  from {
    opacity: 0;
  }
  to {
    opacity: 0.7;
  }
}

@-moz-keyframes slbOverlay {
  from {
    opacity: 0;
  }
  to {
    opacity: 0.7;
  }
}

@keyframes slbOverlay {
  from {
    opacity: 0;
  }
  to {
    opacity: 0.7;
  }
}

@-webkit-keyframes slbEnter {
  from {
    opacity: 0;
    -webkit-transform: translate3d(0, -1em, 0);
  }
  to {
    opacity: 1;
    -webkit-transform: translate3d(0, 0, 0);
  }
}

@-moz-keyframes slbEnter {
  from {
    opacity: 0;
    -moz-transform: translate3d(0, -1em, 0);
  }
  to {
    opacity: 1;
    -moz-transform: translate3d(0, 0, 0);
  }
}

@keyframes slbEnter {
  from {
    opacity: 0;
    -webkit-transform: translate3d(0, -1em, 0);
    -moz-transform: translate3d(0, -1em, 0);
    -ms-transform: translate3d(0, -1em, 0);
    -o-transform: translate3d(0, -1em, 0);
    transform: translate3d(0, -1em, 0);
  }
  to {
    opacity: 1;
    -webkit-transform: translate3d(0, 0, 0);
    -moz-transform: translate3d(0, 0, 0);
    -ms-transform: translate3d(0, 0, 0);
    -o-transform: translate3d(0, 0, 0);
    transform: translate3d(0, 0, 0);
  }
}

@-webkit-keyframes slbEnterNext {
  from {
    opacity: 0;
    -webkit-transform: translate3d(4em, 0, 0);
  }
  to {
    opacity: 1;
    -webkit-transform: translate3d(0, 0, 0);
  }
}

@-moz-keyframes slbEnterNext {
  from {
    opacity: 0;
    -moz-transform: translate3d(4em, 0, 0);
  }
  to {
    opacity: 1;
    -moz-transform: translate3d(0, 0, 0);
  }
}

@keyframes slbEnterNext {
  from {
    opacity: 0;
    -webkit-transform: translate3d(4em, 0, 0);
    -moz-transform: translate3d(4em, 0, 0);
    -ms-transform: translate3d(4em, 0, 0);
    -o-transform: translate3d(4em, 0, 0);
    transform: translate3d(4em, 0, 0);
  }
  to {
    opacity: 1;
    -webkit-transform: translate3d(0, 0, 0);
    -moz-transform: translate3d(0, 0, 0);
    -ms-transform: translate3d(0, 0, 0);
    -o-transform: translate3d(0, 0, 0);
    transform: translate3d(0, 0, 0);
  }
}

@-webkit-keyframes slbEnterPrev {
  from {
    opacity: 0;
    -webkit-transform: translate3d(-4em, 0, 0);
  }
  to {
    opacity: 1;
    -webkit-transform: translate3d(0, 0, 0);
  }
}

@-moz-keyframes slbEnterPrev {
  from {
    opacity: 0;
    -moz-transform: translate3d(-4em, 0, 0);
  }
  to {
    opacity: 1;
    -moz-transform: translate3d(0, 0, 0);
  }
}

@keyframes slbEnterPrev {
  from {
    opacity: 0;
    -webkit-transform: translate3d(-4em, 0, 0);
    -moz-transform: translate3d(-4em, 0, 0);
    -ms-transform: translate3d(-4em, 0, 0);
    -o-transform: translate3d(-4em, 0, 0);
    transform: translate3d(-4em, 0, 0);
  }
  to {
    opacity: 1;
    -webkit-transform: translate3d(0, 0, 0);
    -moz-transform: translate3d(0, 0, 0);
    -ms-transform: translate3d(0, 0, 0);
    -o-transform: translate3d(0, 0, 0);
    transform: translate3d(0, 0, 0);
  }
}


</style>
<div class="__main-container"> 
	#if($publishing.title_enabled == "true" && $publishing.title)
		<h1 class="__title">$publishing.title</h3>
	#end
	#if($publishing.caption_enabled == "true" && $publishing.caption)
		<div class="__caption">$publishing.caption</div>
	#end
	
	#ifnull($defaultfolder)
		#ifnull($entity)
			#set($defaultfolder =  $mediaarchive.getBean("entityManager").loadDefaultFolderForModule($topmodule, $context.getUser()))
		#end
		#ifnotnull($entity)
			#if($topmodule.getId()=="faceprofilegroup")
				#set($defaultfolder =  $mediaarchive.getBean("entityManager").loadDefaultFolderForModule($topmodule, $context.getUser()))		
			#else
				#set($defaultfolder =  $mediaarchive.getBean("entityManager").createDefaultFolder($entity, $context.getUser()))
			#end
		#end
	#end

	$context.putPageValue("defaultfolder", $defaultfolder)

	#if(!$currentcategoryid && $defaultfolder)
		#set( $currentcategoryid = $defaultfolder.getId())
		$context.putPageValue("categoryid", $currentcategoryid)
	#end
		
	$context.putPageValue("entitydialogid", "entitypublishing")
	$context.putPageValue("publishingid", "$publishing.getId()")

	<div class="_gridgallery-container">
		$pages.include("/$mediadbappid/services/publishingdestination/gallery/results.html", $context)
	</div>
	
	#if($publishing.footer_enabled=="true" && $publishing.footer)
		<div class="__footer">$publishing.footer</div>
	#end
</div>



