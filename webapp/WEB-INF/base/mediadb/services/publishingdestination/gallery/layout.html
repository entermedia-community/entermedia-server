#if($publishing.externalcss_enabled == "true" && $publishing.externalcss)
<link type="text/css" rel="stylesheet" href="$publishing.externalcss">
#end

<style type="text/css">
	:root {
		--bg-color: #if($publishing.publishingfeedlayout=="dark") #000 #else #FFFFFF #end;
		--text-color: #if($publishing.publishingfeedlayout=="dark") #fff #else #000 #end;
		--highlight-color: #if($publishing.publishingfeedlayout=="dark") #666 #else #444 #end;
		#if($publishing.containerdimension_enabled=="true")
		--container-width: #if($publishing.containerwidth > 0) ${publishing.containerwidth}px #else 1000px #end;
		--container-height: #if($publishing.containerheight > 0) ${publishing.containerheight}px #else 824px #end;
		#else
		--container-width: 100%;
		--container-height: 100%;
		#end
	}
	body {
		width: 100vw;
		height: 100vh;
		margin: 0;
		padding: 0;
	}
	.__main-container {
		position: relative;
		display: flex;
		flex-direction: column;
		background-color: var(--bg-color);
		width: var(--container-width);
		height: var(--container-height);
		overflow: hidden;
	}
	.__title {
		color: var(--text-color);
		text-align: center;
		padding: 16px;
		margin: 0;
		background-color: #fff;
	}
	.__caption {
		font-size: small;
		color: var(--text-color);
		text-align: center;
		margin-bottom: 16px;
		margin: 0 auto;
		background-color: #fff;
		padding-bottom: 8px;
		width: 100%;
	}
	.__caption::after {
		content: "";
		display: block;
		position: absolute;
		width: var(--container-width);
		left: 0;
		height: 1px;
		background-color: rgba(255, 255, 255, 0.1);
		padding-top: 16px;
	}
	._gridgallery-container {
		flex: 1;
		height: 100%;
	}
	.__footer {
		font-size: small;
		color: var(--text-color);
		text-align: center;
		padding-top: 16px;
		padding-bottom: 8px;
		margin-top: 8px;
		border-top: 0.5px solid rgba(255, 255, 255, 0.1);
		background-color: #fff;
	}
	
.masonry-grid2 {
  display: flex;
  flex-flow: row wrap;
  justify-content: center;
  padding: 2px;
  position: relative;
}
.scrollview {
	overflow-y: auto;
	height: 100%;
}
.scroll-resultsdiv {
    display: flex;
    flex-direction: column;
    height: 100%;
    width: 100%;
    overflow: hidden;
}	
.masonry-grid2 .masonry-grid-cell {
  position: absolute;

}

.masonry-grid-cell .grid-thumbimage {
  padding: 0;
  margin: 0;
  height: 100%;
  text-align: center;
  color: #111;
}

div.masonry-grid-cell .grid-thumbimage img.imagethumb {
  padding: 0;
  display: inline-block;
  margin: 0 auto;
  vertical-align: middle;
  width: 100%;
  height: 100%;
  object-position: center;
  object-fit: cover;
  transition: all 0.1s ease;
}
	
	
</style>
<div class="__main-container"> 
	#if($publishing.title_enabled == "true" && $publishing.title)
		<h1 class="__title">$publishing.title</h3>
	#end
	#if($publishing.caption_enabled == "true" && $publishing.caption)
		<div class="__caption">$publishing.caption</div>
	#end
	
	#ifnull($defaultfolder)
		#ifnull($entity)
			#set($defaultfolder =  $mediaarchive.getBean("entityManager").loadDefaultFolderForModule($topmodule, $context.getUser()))
		#end
		#ifnotnull($entity)
			#if($topmodule.getId()=="faceprofilegroup")
				#set($defaultfolder =  $mediaarchive.getBean("entityManager").loadDefaultFolderForModule($topmodule, $context.getUser()))		
			#else
				#set($defaultfolder =  $mediaarchive.getBean("entityManager").createDefaultFolder($entity, $context.getUser()))
			#end
		#end
	#end

	$context.putPageValue("defaultfolder", $defaultfolder)

	#if(!$currentcategoryid && $defaultfolder)
		#set( $currentcategoryid = $defaultfolder.getId())
		$context.putPageValue("categoryid", $currentcategoryid)
	#end
		
	$context.putPageValue("entitydialogid", "entitypublishing")
	$context.putPageValue("publishingid", "$publishing.getId()")

	<div class="_gridgallery-container">
		$pages.include("/$mediadbappid/services/publishingdestination/gallery/results.html", $context)
	</div>
	
	#if($publishing.footer_enabled=="true" && $publishing.footer)
		<div class="__footer">$publishing.footer</div>
	#end
</div>
<script type="text/javascript" src="$!siteroot$applink/components/javascript/jquery-3.7.1.min.js"></script>
<script type="text/javascript" src="$!siteroot$applink/components/javascript/jquery-brick-vertical.js"></script>
<script type="text/javascript">
		var grid = $(".masonry-grid2");
		grid.brick();
		$(".scrollview").on("scroll", function () {
		    checkScroll(grid);
		});
</script>