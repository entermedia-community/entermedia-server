#ifnull($loginroot)
	#set($loginroot = $content.loginroot)
#end
    
<div id ="ajaxloginformdiv">
#set( $email = $context.getRequestParameter("email") )
<div class="my-3 w-100">
#if( $commandSucceeded == "ok")
	<div class="mb-3 text-center text-contrast"><strong>[[Please check your email]]</strong></div>
#else
	<div class="alert alert-danger text-center m-5 w-100" role="alert">
	##$error
	<strong>[[Login Error]].</strong> [[Please contact and Administrator]]
	</div>
#end

<form name="login" 
	id="login"
	class="ajaxform  row justify-content-md-center" 
	data-targetdiv="ajaxloginformdiv"
	action="$!{home}$!{loginroot}/ajaxlogin.html" 
	method="POST" >
			
			
		#if( $email )
		<input  type="hidden" name="email" value="$email" />
		#else
		<div class="col-12 col-md-6">
		<input class="form-control required grabfocus" type="text" name="email" size="50" placeholder="[[Enter your Email Address]]" required />
		</div>
		#end
		
		<div class="col-12 col-md-6">
					<input class="form-control grabfocus required" id="entermediakey" name="templogincode" placeholder="[[Enter six digit login code]]" required />
		</div>

		<div class="col-12 col-md-auto">
			<div class="d-flex justify-content-center">
				<input class="btn themed-btn" name="submit" type="submit" id="login-submit" value="[[Login]]" />
			</div>
		</div>
		#ifnull($loginok)
			#set($loginok = $content.loginok)
		#end
		
		#ifnotnull($loginok)
			#set( $loginok = "$context.siteRoot" + "$loginok")
			<input type="hidden" name="loginokpage" value="#esc($!loginok)"/>
		#end
	

	#ifnotnull( $userCategory)
			<input type="hidden" name="categoryid" value="$userCategory.id" />
	#end
	
</form>   

<div class="my-4 text-center"><a href="$!{home}${content.loginroot}/login.html" style="">[[Other login options]]</a></div>
</div>
#if ( $context.getPageValue("oe-exception") )
		<div style="border: 1px solid black; width: 60%; text-align: center">$context.getPageValue("oe-exception")</div>
		$context.removeSessionValue("oe-exception")
#end

</div>